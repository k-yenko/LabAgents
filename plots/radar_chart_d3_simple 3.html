<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Computational Chemistry Agent Performance - Radar Chart</title>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background: #f8f9fa;
        }
        .chart-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            max-width: 900px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .legend {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .legend-item:hover {
            background-color: #f0f0f0;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }
        .axis {
            stroke: #ddd;
            stroke-width: 1;
        }
        .axis-label {
            font-size: 12px;
            font-weight: bold;
            text-anchor: middle;
            fill: #333;
        }
        .grid-circle {
            fill: none;
            stroke: #eee;
            stroke-width: 1;
        }
        .model-area {
            fill-opacity: 0.1;
            stroke-width: 2;
        }
        .model-line {
            fill: none;
            stroke-width: 2;
        }
        .data-point {
            stroke: white;
            stroke-width: 1;
        }
    </style>
</head>
<body>
    <div class="chart-container">
        <h1>Multi-Dimensional Model Performance</h1>
        <p class="subtitle">Normalized: Each dimension scaled 0-1 (Excludes Opus - incomplete data)</p>
        <div id="chart"></div>
        <div class="legend" id="legend"></div>
    </div>

    <script>
        // Data from our actual analysis
        const rawData = [
            {model: "Claude Sonnet 4", completion: 1.000, correctness: 1.000, toolUse: 1.000, passRate: 1.000, speed: 0.290, consistency: 1.000, color: "#17becf"},
            {model: "Gemini 2.5 Pro", completion: 1.000, correctness: 0.357, toolUse: 1.000, passRate: 1.000, speed: 0.000, consistency: 1.000, color: "#ff7f0e"},
            {model: "Grok Code Fast", completion: 0.688, correctness: 0.714, toolUse: 0.812, passRate: 0.400, speed: 0.494, consistency: 1.000, color: "#9467bd"},
            {model: "GPT-5", completion: 0.500, correctness: 0.429, toolUse: 0.875, passRate: 0.400, speed: 0.379, consistency: 1.000, color: "#d62728"},
            {model: "Grok 4 Fast", completion: 0.500, correctness: 0.571, toolUse: 0.750, passRate: 0.200, speed: 0.792, consistency: 1.000, color: "#2ca02c"},
            {model: "O3", completion: 0.125, correctness: 0.000, toolUse: 0.500, passRate: 0.000, speed: 0.921, consistency: 1.000, color: "#1f77b4"},
            {model: "Deepseek", completion: 0.000, correctness: 0.000, toolUse: 0.500, passRate: 0.000, speed: 0.157, consistency: 1.000, color: "#8c564b"}
        ];

        const metrics = ["Completion", "Correctness", "Tool Use", "Pass Rate", "Speed", "Consistency"];

        // Chart dimensions
        const width = 600;
        const height = 600;
        const margin = 100;
        const radius = Math.min(width, height) / 2 - margin;

        // Create SVG
        const svg = d3.select("#chart")
            .append("svg")
            .attr("width", width + 2 * margin)
            .attr("height", height + 2 * margin);

        const g = svg.append("g")
            .attr("transform", `translate(${width/2 + margin}, ${height/2 + margin})`);

        // Scale
        const angleScale = d3.scaleLinear()
            .domain([0, metrics.length])
            .range([0, 2 * Math.PI]);

        const radiusScale = d3.scaleLinear()
            .domain([0, 1])
            .range([0, radius]);

        // Grid circles
        const gridLevels = [0.2, 0.4, 0.6, 0.8, 1.0];
        g.selectAll(".grid-circle")
            .data(gridLevels)
            .enter()
            .append("circle")
            .attr("class", "grid-circle")
            .attr("r", d => radiusScale(d));

        // Axes
        g.selectAll(".axis")
            .data(metrics)
            .enter()
            .append("line")
            .attr("class", "axis")
            .attr("x1", 0)
            .attr("y1", 0)
            .attr("x2", (d, i) => radiusScale(1) * Math.cos(angleScale(i) - Math.PI/2))
            .attr("y2", (d, i) => radiusScale(1) * Math.sin(angleScale(i) - Math.PI/2));

        // Axis labels
        g.selectAll(".axis-label")
            .data(metrics)
            .enter()
            .append("text")
            .attr("class", "axis-label")
            .attr("x", (d, i) => radiusScale(1.15) * Math.cos(angleScale(i) - Math.PI/2))
            .attr("y", (d, i) => radiusScale(1.15) * Math.sin(angleScale(i) - Math.PI/2))
            .attr("dy", "0.35em")
            .text(d => d);

        // Line generator
        const lineGenerator = d3.lineRadial()
            .angle((d, i) => angleScale(i))
            .radius(d => radiusScale(d))
            .curve(d3.curveLinearClosed);

        // Create model groups
        const modelGroups = g.selectAll(".model-group")
            .data(rawData)
            .enter()
            .append("g")
            .attr("class", "model-group");

        // Add areas
        modelGroups.append("path")
            .attr("class", "model-area")
            .attr("d", d => {
                const values = [d.completion, d.correctness, d.toolUse, d.passRate, d.speed, d.consistency];
                return lineGenerator(values);
            })
            .style("fill", d => d.color)
            .style("stroke", d => d.color);

        // Add lines
        modelGroups.append("path")
            .attr("class", "model-line")
            .attr("d", d => {
                const values = [d.completion, d.correctness, d.toolUse, d.passRate, d.speed, d.consistency];
                return lineGenerator(values);
            })
            .style("stroke", d => d.color);

        // Add data points
        modelGroups.selectAll(".data-point")
            .data(d => {
                const values = [d.completion, d.correctness, d.toolUse, d.passRate, d.speed, d.consistency];
                return values.map((value, i) => ({
                    value: value,
                    angle: i,
                    color: d.color
                }));
            })
            .enter()
            .append("circle")
            .attr("class", "data-point")
            .attr("cx", d => radiusScale(d.value) * Math.cos(angleScale(d.angle) - Math.PI/2))
            .attr("cy", d => radiusScale(d.value) * Math.sin(angleScale(d.angle) - Math.PI/2))
            .attr("r", 3)
            .style("fill", d => d.color);

        // Create legend
        const legend = d3.select("#legend");

        rawData.forEach((model, i) => {
            const item = legend.append("div")
                .attr("class", "legend-item")
                .style("cursor", "pointer");

            item.append("div")
                .attr("class", "legend-color")
                .style("background-color", model.color);

            item.append("span")
                .text(model.model);

            // Add interactivity
            item.on("click", function() {
                const modelGroup = g.selectAll(".model-group")
                    .filter(d => d.model === model.model);

                const isVisible = modelGroup.style("opacity") !== "0.3";

                if (isVisible) {
                    modelGroup.style("opacity", "0.3");
                    item.style("opacity", "0.5");
                } else {
                    modelGroup.style("opacity", "1");
                    item.style("opacity", "1");
                }
            });
        });

        // Add grid labels
        g.selectAll(".grid-label")
            .data(gridLevels)
            .enter()
            .append("text")
            .attr("class", "grid-label")
            .attr("x", 5)
            .attr("y", d => -radiusScale(d))
            .attr("dy", "0.35em")
            .style("font-size", "10px")
            .style("fill", "#999")
            .text(d => d.toFixed(1));
    </script>
</body>
</html>